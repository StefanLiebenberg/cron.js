var i=this;function k(b,a,c){return b.call.apply(b.bind,arguments)}function l(b,a,c){if(!b)throw Error();if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return b.apply(a,c)}}else return function(){return b.apply(a,arguments)}}function m(b,a,c){m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?k:l;return m.apply(null,arguments)}
function n(b,a){var c=b.split("."),d=i;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&a!==void 0?d[f]=a:d=d[f]?d[f]:d[f]={}}function o(b,a){function c(){}c.prototype=a.prototype;b.C=a.prototype;b.prototype=new c};function p(b){var a=new Date,c;if(b.t)for(c=b.s.next(b.t);c<a;)c=b.s.next(c);else c=b.s.next(a);b.n=c}function q(b){var a=null,a=new Date;b.n||p(b);return Math.max(10,b.n-a)};function r(){this.h=[];this.f=!1;this.i=void 0}r.prototype.add=function(b){this.h.push(b);this.f&&this.next()};r.prototype.A=1E3;r.prototype.v=function(){this.f&&this.w<new Date-this.A&&(this.stop(),this.start())};r.prototype.start=function(){if(!this.f&&(this.f=!0,this.next(),!this.u))this.u=setInterval(this.v.bind(this),6E4)};r.prototype.stop=function(){if(this.f)this.f=!1,clearTimeout(this.i),delete this.i,this.u&&clearInterval(this.u)};
r.prototype.next=function(){var b=!this.f,b=(b=b||Boolean(this.i))||!Boolean(this.h.length);if(!b){for(var b=this.h[0],a,c=1,d=this.h.length;c<d;c++)a=this.h[c],a.n<b.n&&(b=a);s(this,b)}};function s(b,a){var c=new Date,d=q(a);b.w=new Date(c.getTime()+d);t(b,function(){a.t=new Date;setTimeout(a.z,10);p(a);delete this.i;delete this.w;this.next()},d)}function t(b,a,c){a=setTimeout(m(a,b),c);b.i=a};function u(){}u.prototype.parse=function(b){return this.c.apply(this,arguments)};u.prototype.c=function(b){return b};function v(b){this.b=b}o(v,u);v.prototype.test=function(b){this.b.lastIndex=0;return this.b.test(b)};v.prototype.c=function(b){return this.test(b)?(this.b.lastIndex=0,b.match(this.b)):[]};function x(){this.b=/^\*$/}o(x,v);x.prototype.c=function(b,a){return y(a.d)};function z(b){this.b=RegExp("^"+b+"-"+b+"$")}o(z,v);z.prototype.c=function(b,a){var c=b.split("-"),d=parseInt(c[0],10)-a.d.a,c=parseInt(c[1],10)-a.d.a;return y(a.d).slice(d,c+1)};function A(b){this.b=RegExp("^[^/]+/"+b+"$")}o(A,v);A.prototype.c=function(b,a){for(var c=b.split("/"),d=a.parse(c[0]),c=parseInt(c[1],10),f=[],j=0,w=d.length;j<w;j+=c)f.push(d[j]);return f};function B(b,a){if(b>a)throw Error("sage.util.Range: from is larger than to");this.a=b;this.p=a;this.length=1+a-b}B.prototype.indexOf=function(b){var a=-1;b>=this.a&&b<=this.p&&(a=b-this.a);return a};function y(b){var a=null,c=null;if(typeof a!=="number")a=b.a;if(typeof c!=="number")c=b.p;if(a>c||a<b.a||c>b.p)throw a="sage.util.Range: ",a+="values are out of range",Error(a);b=1+c-a;c=Array(b);if(b>0)for(;b--;)c[b]=a+b;return c}B.prototype.toString=function(){return"Range["+this.a+".."+this.p+"]"};function F(b){for(var a=b.length,c,d,f=0;f<a;f+=1){c=b[f];for(d=f+1;(d=b.indexOf(c,d))!==-1;)b.splice(d,1),a--}};function G(b,a){this.d=new B(b,a);this.e=[]}o(G,u);G.prototype.c=function(b){for(var a=[],c=this.e.length,d,f=0;f<c;f++)if(d=this.e[f],d.test(b)){a=d.parse(b,this);F(a);a.sort(function(a,b){return a-b});break}return a};function H(b){this.b=RegExp("^"+b+"$")}o(H,v);H.prototype.c=function(b,a){return[parseInt(b,10)-a.d.a<0||parseInt(b,10)-a.d.a>=a.d.length?void 0:a.d.a+(parseInt(b,10)-a.d.a)]};function I(){this.b=/([a-z][a-z][a-z])|([A-Z][A-Z][A-Z])/g;this.j={}}o(I,v);I.prototype.c=function(b,a){b=b.replace(this.b,function(b){b=b.toLowerCase();b in a.j&&(b=a.j[b]);return b});return a.parse(b)};function K(){this.b=/\,/}o(K,v);K.prototype.c=function(b,a){var c,d,f;c=b.split(",");f=c.length;d=[];for(var j=0;j<f;j++)d.push.apply(d,a.parse(c[j]));return d};function L(b,a,c){G.call(this,b,a);this.r=c;this.e[0]=new K;this.e[1]=new x;this.e[2]=new H(this.r);this.e[3]=new z(this.r);this.e[4]=new A(this.r)}o(L,G);function M(b,a,c){L.call(this,b,a,c);this.e[5]=new I}o(M,L);var N=new L(0,59,"[1-5]?[0-9]"),O=new L(0,59,"[1-5]?[0-9]"),P=new L(0,23,"(([0-1]?[0-9])|([2][0-3]))"),Q=new L(1,31,"(([0]?[1-9])|([1-2][0-9])|([3][0-1]))"),R=new M(1,12,"(([0]?[1-9])|([1][0-2]))");R.j={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12};var S=new M(1,7,"([0]?[1-7])");S.j={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function T(b){b=b.trim();b in U&&(b=U[b]);this.B=b;var a=b.split(" ");if(a.length!==6)throw a="CronSpec only accepts specifications with 6 parts:",a+=b,a+=" is invalid",Error(a);this.o=N.parse(a[0]);this.l=O.parse(a[1]);this.k=P.parse(a[2]);this.g=Q.parse(a[3]);this.m=R.parse(a[4]);this.q=S.parse(a[5])}
T.prototype.next=function(b){var a=new Date;a.setTime(b.getTime());a.setSeconds(a.getSeconds()+1);a.setMilliseconds(0);for(var c=(b=this.o.length)&&b!==60,d=this.l.length,f=d&&d!==60,j=this.k.length,w=j&&j!==24,C=this.q.length,V=C&&C!==7,D=this.g.length,W=D&&D!==31,E=this.m.length,X=E&&E!==12,J=!1,g,h;!J;)if(g=a.getSeconds(),c&&this.o.indexOf(g)===-1){h=!0;for(var e=0;e<b;e++)if(this.o[e]>=g){a.setSeconds(this.o[e]);h=!1;break}h&&(a.setSeconds(0),a.setMinutes(a.getMinutes()+1))}else if(g=a.getMinutes(),
f&&this.l.indexOf(g)==-1){h=!0;for(e=0;e<d;e++)if(this.l[e]>=g){a.setMinutes(this.l[e]);h=!1;break}h&&(a.setMinutes(0),a.setHours(a.getHours()+1))}else{g=a.getHours();if(w&&this.k.indexOf(g)==-1){h=!0;for(e=0;e<j;e++)if(this.k[e]>=g){a.setHours(this.k[e]);h=!1;break}if(h){a.setDate(a.getDate()+1);a.setSeconds(0);a.setMinutes(0);a.setHours(0);continue}}g=a.getDay()+1;if(V&&this.q.indexOf(g)==-1){h=!0;for(e=0;e<C;e++)if(this.q[e]>=g){a.setDate(a.getDate()+(this.q[e]-g-1));h=!1;break}if(h){a.setDate(a.getDate()+
(8-g));a.setSeconds(0);a.setMinutes(0);a.setHours(0);continue}}g=a.getDate();if(W&&this.g.indexOf(g)==-1){h=!0;for(e=0;e<D;e++)if(this.g[e]>=g){for(;a.getDate()!=this.g[e];)a.setDate(this.g[e]);h=!1;break}a.setSeconds(0);a.setHours(0);a.setMinutes(0);h&&(a.setDate(1),a.setMonth(a.getMonth()+1))}else if(g=a.getMonth()+1,X&&this.m.indexOf(g)==-1){h=!0;for(e=0;e<E;e++)if(this.m[e]>=g){a.setMonth(this.m[e]-1);h=!1;break}a.setSeconds(0);a.setMinutes(0);a.setHours(0);a.setDate(1);h&&(a.setMonth(0),a.setFullYear(a.getFullYear()+
1))}else J=!0}return a};var U={"@second":"* * * * * *","@minute":"0 * * * * *","@halfminute":"0,30 * * * * *","@hour":"0 0 * * * *","@halfhour":"0 0,30 * * *","@daily":"0 0 0 * * *","@monthly":"0 0 0 1 * *","@yearly":"0 0 0 1 1 *","@weekly":"0 0 0 * * 1","@weekday":"0 0 0 * * 2-6"};n("Cron",r);n("Cron.prototype.start",r.prototype.start);n("Cron.prototype.stop",r.prototype.stop);n("Cron.prototype.check",r.prototype.v);n("Cron.prototype.add",r.prototype.add);n("Cron.Spec",T);n("Cron.Spec.prototype.next",T.prototype.next);n("Cron.Spec.next",function(b,a){return a.next(b)});n("Cron.Spec.parse",function(b){return new T(b)});n("Cron.Job",function(b,a){typeof b==="string"&&(b=new T(b));this.s=b;this.z=a;this.t=null;p(this)});

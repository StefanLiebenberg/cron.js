function t(e){for(var d=0,j=e.length;d<j;d++)for(var g=e[d],k=d+1;(k=e.indexOf(g,k))!=-1;)e.splice(k,1),j--}
window.CronSpec=new function(){function e(c,b){this.p=c;this.G=b;for(var a=c;a<=b;a++)this.push(a)}function d(c,b){this.t=c;this.u=b}function j(c,b){this.b=new e(c,b);this.a=[]}function g(c,b,a){this.h=a;this.b=new e(c,b);this.a=[];this.g={};this.a.push(new d(/\,/,g.d.v));this.a.push(new d(/^\*$/,g.d.all));this.a.push(new d(RegExp("^"+this.h+"$"),g.d.C));this.a.push(new d(RegExp("^"+this.h+"-"+this.h+"$"),g.d.b));this.a.push(new d(RegExp("^[^/]+/"+this.h+"$"),g.d.z))}e.prototype=[];d.prototype={test:function(c){return this.t.test(c)},
parse:function(c,b){return this.u.call(this,c,b)}};j.prototype.parse=function(c){for(var b=0,a=this.a.length;b<a;b++)if(this.a[b].test(c))return c=this.a[b].parse(c,this),t(c),c.sort(function(a,b){return a-b}),c;return[]};g.prototype=new j(0,0);g.d={all:function(c,b){return b.b.slice()},v:function(c,b){for(var a=c.split(","),d=[],e=0;e<a.length;e++)d.push.apply(d,b.parse(a[e]));return d},C:function(c,b){var a=parseInt(c)-b.b.p;return b.b.slice(a,a+1)},b:function(c,b){var a=c.split("-");return b.b.slice(parseInt(a[0])-
b.b.p,parseInt(a[1])-b.b.p+1)},z:function(c,b){for(var a=c.split("/"),d=b.parse(a[0]),a=parseInt(a[1]),e=[],g=0,j=d.length;g<j;g+=a)e.push(d[g]);return e}};var k=new g(0,59,"[1-5]?[0-9]"),p=new g(0,59,"[1-5]?[0-9]"),v=new g(0,23,"(([0-1]?[0-9])|([2][0-3]))"),w=new g(1,31,"(([0]?[1-9])|([1-2][0-9])|([3][0-1]))"),m=new g(1,12,"(([0]?[1-9])|([1][0-2]))"),l=new g(1,7,"([0]?[1-7])");m.g={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12};l.g={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,
sat:7};var n=new d(/([a-z][a-z][a-z])|([A-Z][A-Z][A-Z])/g,function(c,b){c=c.replace(this.t,function(a){a=a.toLowerCase();a in b.g&&(a=b.g[a]);return a});return b.parse(c)});m.a.push(n);l.a.push(n);var o={"@second":"* * * * * *","@minute":"0 * * * * *","@halfminute":"0,30 * * * * *","@hour":"0 0 * * * *","@halfhour":"0 0,30 * * *","@daily":"0 0 0 * * *","@monthly":"0 0 0 1 * *","@yearly":"0 0 0 1 1 *","@weekly":"0 0 0 * * 1","@weekday":"0 0 0 * * 2-6"};this.parse=function(c){c=c.trim(" ");c in o&&
(c=o[c]);var b=c.trim().split(" ");if(b.length!=6)throw Error("CronSpec only accepts cronstrings with 6 parts: "+c+" is invalid");return{F:c,l:k.parse(b[0]),j:p.parse(b[1]),i:v.parse(b[2]),c:w.parse(b[3]),k:m.parse(b[4]),n:l.parse(b[5])}};this.next=function(c,b){var a=new Date(c.getTime()+1E3);a.setMilliseconds(0);for(var d=b.l.length,e=d&&d!=60,g=b.j.length,j=g&&g!=60,k=b.i.length,m=k&&k!=24,l=b.n.length,n=l&&l!=7,q=b.c.length,o=q&&q.length!=31,r=b.k.length,p=r&&r!=12,s=!1;!s;){var h=a.getSeconds();
if(e&&b.l.indexOf(h)==-1){for(var i=!0,f=0;f<d;f++)if(b.l[f]>=h){a.setSeconds(b.l[f]);i=!1;break}i&&(a.setSeconds(0),a.setMinutes(a.getMinutes()+1))}else if(h=a.getMinutes(),j&&b.j.indexOf(h)==-1){i=!0;for(f=0;f<g;f++)if(b.j[f]>=h){a.setMinutes(b.j[f]);i=!1;break}i&&(a.setMinutes(0),a.setHours(a.getHours()+1))}else{h=a.getHours();if(m&&b.i.indexOf(h)==-1){i=!0;for(f=0;f<k;f++)if(b.i[f]>=h){a.setHours(b.i[f]);i=!1;break}if(i){a.setDate(a.getDate()+1);a.setSeconds(0);a.setMinutes(0);a.setHours(0);continue}}h=
a.getDay()+1;if(n&&b.n.indexOf(h)==-1){i=!0;for(f=0;f<l;f++)if(b.n[f]>=h){a.setDate(a.getDate()+(b.n[f]-h-1));i=!1;break}if(i){a.setDate(a.getDate()+(8-h));a.setSeconds(0);a.setMinutes(0);a.setHours(0);continue}}h=a.getDate();if(o&&b.c.indexOf(h)==-1){i=!0;for(f=0;f<q;f++)if(b.c[f]>=h){for(;a.getDate()!=b.c[f];)a.setDate(b.c[f]);i=!1;break}a.setSeconds(0);a.setHours(0);a.setMinutes(0);i&&(a.setDate(1),a.setMonth(a.getMonth()+1))}else if(h=a.getMonth()+1,p&&b.k.indexOf(h)==-1){i=!0;for(f=0;f<r;f++)if(b.k[f]>=
h){a.setMonth(b.k[f]-1);i=!1;break}a.setSeconds(0);a.setMinutes(0);a.setHours(0);a.setDate(1);i&&(a.setMonth(0),a.setFullYear(a.getFullYear()+1))}else s=!0}}return a}};function u(e,d){this.o=CronSpec.parse(e);this.A=d;this.r=null;this.q()}
u.prototype={q:function(){if(this.r){for(var e=CronSpec.next(this.r,this.o),d=new Date;e<d;)e=CronSpec.next(e,this.o);this.e=e}else this.e=CronSpec.next(new Date,this.o)},w:function(){this.e||this.q();return Math.max(0,this.e-new Date)},B:function(){this.r=new Date;this.A.apply(this);this.q()}};
var x=new function(){if(this.constructor.s)return this.constructor.s;this.constructor.s=this;var e=this.D=[];this.add=function(d){e.push(d);this.f&&this.next()};this.remove=function(){};this.next=function(){if(this.f&&!this.m&&e.length){for(var d=e[0],j=1,g=e.length;j<g;j++)e[j].e<d.e&&(d=e[j]);var k=this;this.m=setTimeout(function(){d.B();delete k.m;k.next()},d.w())}};this.start=function(){if(!this.f)this.f=!0,this.next()};this.stop=function(){if(this.f)this.f=!1,clearTimeout(this.m),delete this.m}};
window.Crontab=x;window.Cron=u;window.CronSpec=CronSpec;
